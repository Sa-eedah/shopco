{% extends 'shopco/base.html' %}
{% load static %}

{% block title %} Inbox {% endblock %}

{% block content %}
<div class="inbox-container">
    <h1>Inbox</h1>

    <div class="inbox-list">
        {% for conversation in conversations %}
        <a href="{% url 'conversation:detail' conversation.id %}" class="inbox-item-link">
            <div class="inbox-item">
                <div class="inbox-item-image">
                    <img src="{{ conversation.item.image.url }}" alt="{{ conversation.item.name }}">
                </div>

                <div class="inbox-item-details">
                    {% for member in conversation.members.all %}
                        {% if member != request.user %}
                            <p class="inbox-member">
                                <strong>{{ member.username }}</strong> 
                                <span class="inbox-date"> | {{ conversation.modified_at }}</span>
                            </p>
                            <p class="inbox-item-name">{{ conversation.item.name }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

{% endblock %}